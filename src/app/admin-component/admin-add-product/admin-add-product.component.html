<div class="product-management-container">
  <h2>Admin Product Management</h2>

  <form [formGroup]="productForm" class="form-container">

    <!-- CATEGORY -->
    <div class="radio-group">
      <label><input type="radio" value="Young Boy" formControlName="productCategory"> Young Boy</label>
      <label><input type="radio" value="Young Girl" formControlName="productCategory"> Young Girl</label>
      <label><input type="radio" value="Kids" formControlName="productCategory"> Kids</label>
    </div>

    <!-- SIZES (UNCHANGED) -->
    <div class="size-box">
      <div class="size-option">
        <label>
          <input type="checkbox" (change)="toggleSize('S', $event)"> S
        </label>
        <label>
          <input type="checkbox" (change)="toggleSize('M', $event)"> M
        </label>
        <label>
          <input type="checkbox" (change)="toggleSize('L', $event)"> L
        </label>
        <label>
          <input type="checkbox" (change)="toggleSize('XL', $event)"> XL
        </label>
      </div>
    </div>

    <input formControlName="name" placeholder="Product Name">
    <input formControlName="brand" placeholder="Brand Name">
    <input type="number" formControlName="price" placeholder="Price">
    <input type="number" formControlName="oldprice" placeholder="Old Price">
    <input type="number" formControlName="discount" placeholder="Discount %">
    <input type="number" formControlName="quantity" placeholder="Quantity">
    <input formControlName="itemCategory" placeholder="Category">

    <input type="file" accept="image/*" (change)="onImageSelect($event)">

    <!-- COLOR INPUT -->
    <div class="color-input">
      <input type="color" formControlName="currentColor">
      <button type="button" class="small-btn" (click)="addColor()">Add</button>
    </div>

    <!-- COLOR CHIPS -->
    <div class="color-list">
      <div class="color-chip" *ngFor="let c of colors.controls; let i = index">
        <span class="color-dot" [style.background]="c.value.value"></span>
        <span class="color-text">{{ c.value.value }}</span>
        <span class="remove" (click)="removeColor(i)">âœ•</span>
      </div>
    </div>

    <!-- DESCRIPTION (MOVED BELOW ALL INPUTS) -->
    <textarea formControlName="description" class="desc-box" placeholder="Product Description"></textarea>

    <div class="btn-container">
      <button type="button" class="small-btn" [disabled]="productForm.invalid" (click)="addProduct()" *ngIf="!Isbtn">Add Product</button>
      <button type="button" class="small-btn" (click)="addProduct()" *ngIf="Isbtn">Update Product</button>
      <button type="button" class="small-btn" (click)="ResetForm()" *ngIf="Isbtn">Cancel</button>
    </div>
  </form>

  <!-- PRODUCT TABLE -->
  <table>
    <tr>
      <th>Name</th>
      <th>Brand</th>
      <th>Description</th>
      <th>Price</th>
      <th>Discount</th>
      <th>Old Price</th>
      <th>Quantity</th>
      <th>Category</th>
      <th>Sizes</th>
      <th>Color</th>
      <th>Image</th>
      <th>Actions</th>
    </tr>

    <tr *ngFor="let p of DataItem">
      <td>{{p.itemName}}</td>
      <td>{{p.brand}}</td>
      <td>{{p.detail}}</td>
      <td>{{p.price}}</td>
      <td>{{p.discount>0 ? '-' + p.discount + '%' : 'No Discount'}}</td>
      <td>{{p.oldprice}}</td>
      <td>{{p.qty}}</td>
      <td>{{p.category}}</td>
      <td>{{p.sizes?.join(', ')}}</td>
      <td>
        <div style="display:flex;align-items:center;gap:5px;">
          <div [style.background]="p.color?.value" style="width:20px;height:20px;border-radius:50%;border:1px solid #ccc;"></div>
          <span>{{p.color?.text}}</span>
        </div>
      </td>
      <td><img [src]="p.img" class="product-img"></td>
      <td>
        <button class="btn1" (click)="EditProduct(p)">Edit</button>
        <button class="btn" (click)="DeleteProduct(p)">Delete</button>
      </td>
    </tr>
  </table>
</div>
