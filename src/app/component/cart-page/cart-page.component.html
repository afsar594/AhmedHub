<div class="cart-page-container">

  <form [formGroup]="cartForm">

    <div class="cart-header">
      <h2>
        <input
          type="checkbox"
          formControlName="selectAll"
          class="cart-checkbox"
        />
        Your Cart
      </h2>

      <button
        type="button"
        class="clear-btn"
        *ngIf="cartItems.length > 0"
        (click)="deleteSelected()"
      >
        Delete Selected
      </button>

      <button
        type="button"
        class="clear-btn"
        *ngIf="cartItems.length > 0"
        (click)="clearAll()"
      >
        Clear All
      </button>
    </div>

    <div formArrayName="items">

      <div
        class="cart-item"
        *ngFor="let item of cartItems; let i = index"
        [formGroupName]="i"
      >

        <input
          type="checkbox"
          formControlName="selected"
          class="item-checkbox"
        />

        <img [src]="item.image" class="item-img" />

        <div class="item-info">
          <h3>{{ item.itemName }}</h3>

          <p class="price">
            $ {{ item.price }}
            <span class="old-price" *ngIf="item.oldPrice">
              $ {{ item.oldPrice }}
            </span>
          </p>

          <div class="qty-box">
            <button type="button" (click)="decreaseQty(item)">-</button>
            <span>{{ item.qty }}</span>
            <button type="button" (click)="increaseQty(item)">+</button>
          </div>
        </div>

        <button
          type="button"
          class="remove-btn"
          (click)="removeItem(item.id, item.itemName)"
        >
          Remove
        </button>

      </div>

    </div>

    <div *ngIf="cartItems.length === 0" class="empty-cart">
      Your cart is empty.
    </div>

  </form>


  <div class="cart-summary-area">

    <h3>Order Summary</h3>

    <div class="summary-row">
      <span>Subtotal ({{ cartItems.length }} items)</span>
      <span>$ {{ total }}</span>
    </div>

    <div class="summary-row">
      <span>Shipping Fee</span>
      <span>$ 0</span>
    </div>

    <input
      type="text"
      placeholder="Enter Voucher Code"
      class="voucher-input"
    />

    <button class="apply-btn" type="button">
      APPLY
    </button>

    <hr />

    <div class="summary-total">
      <span>Total</span>
      <span>$ {{ total }}</span>
    </div>

    <button
      class="checkout-btn"
      type="button"
      (click)="checkout()"
      [disabled]="cartItems.length === 0"
    >
      PROCEED TO CHECKOUT
    </button>

  </div>

</div>